
express
apollo


use JSON, enable gzip compression

Versioning

versionless API, no breaking changes, use new fields and arguments, deprecate old

Business Logic Layer


between GraphQL and database
contains validation, authorization, error handling

pass full user object instead of opaque token / API key to business logic layer

authorization: whether a given user/session/context has permission to perform an action or see a piece of data
beware: place in business logic layer, don't place authorization in GraphQL layer, breaks separation

https://graphql.org/img/diagrams/business_layer.png

- authorisation
- scoping for different user groups
- rate limiting

HTTP

API layer is behind Authentication layer, access to the session / user information

need to transmit query, variables as JSON, name of operation to execute

GET request: with query parameters `query`, `variables`, `operationName`

POST request:
    JSON with application/json content-type, with fields `query`, `operationName`, `variables`
    application/graphql content type, body in graphql query string ?? what about variables and operationName ?!

response: JSON, fields: "data": object with result, "errors": array with errors, omit if no errors


## Todo

- analytics
- subscription, streaming