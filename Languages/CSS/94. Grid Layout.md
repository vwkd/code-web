# Grid Layout

[TOC]


<!-- ToDo: finish -->
<!-- todo: remove unnecessary "grid" fillerword, e.g. explicit ~grid~ track -->

## Introduction

- a regular layout, for applications
- two-dimensional layout since uses grid, for one-dimensional layout see Flex Layout
- replaces Table Layout üéâ



## Terminology

- grid line: horizontal or vertical line
- grid: set of intersecting grid lines
- grid track: space between two adjacent grid lines, defines columns and rows
- grid cell: intersection of a row and a column
- grid area: rectangle of adjacent grid cells



## Tracks

- rows / columns are relative to logical inline / block directions, see Writing Mode
- beware: can't specify directions independent of writing mode like in Flex Layout, not needed since can specify exact placement of items, see Placement ‚ùóÔ∏è
- explicit or implicit
track list is space-separated list of track sizes, see spec for full details

### Track size

track list is series of track sizing functions and line names

---

```
<flexible-breadth>       = <length-percentage> | <flex> | min-content | max-content | auto
<inflexible-breadth>     = <length-percentage> | min-content | max-content | auto
<fixed-breadth>          = <length-percentage>

<flexible-size>          = <flexible-breadth> | minmax( <inflexible-breadth> , <flexible-breadth> ) | fit-content( <length-percentage> )
<fixed-size>             = <fixed-breadth> | minmax( <fixed-breadth> , <flexible-breadth> ) | minmax( <inflexible-breadth> , <fixed-breadth> )

<flexible-repeat>        = repeat( <integer [1,‚àû]> , <flexible-size>+ )
<auto-repeat>            = repeat( auto-fill | auto-fit , <fixed-size>+ )
<fixed-repeat>           = repeat( <integer [1,‚àû]> , <fixed-size>+ )

<flexible-list>          = [ <flexible-size> | <flexible-repeat> ]+
<auto-flexible-list>     = [ <fixed-size> | <fixed-repeat> ]* <auto-repeat> [ <fixed-size> | <fixed-repeat> ]*
<explicit-flexible-list> = <flexible-size>+
```

beware: left out line-names for clarity
<!-- todo: line-names -->

percentages refers to corresponding dimension of the content area

max-content: the largest max-content contribution of the grid items occupying the grid track
min-content: the largest min-content contribution of the grid items occupying the grid track

??!! beware: `<flex>` outside of `minmax` has a minimum value of `auto`, i.e. like `minmax(auto, <flex>)`

minmax(min, max): range
beware: can set flex factor only as maximum, not minimum (as of August 2020)
`auto` as minimum: This initially is often, but not always, equal to a max-content minimum
`auto` as minimum: largest minimum size of a grid item in the track
  beware: This initially is often, but not always, equal to a min-content minimum
`auto` as maximum: max-content, but also allows expansion of the track by the align-content and justify-content properties
  beware: ??

`auto` computes to `minmax(auto, auto)`

fit-content( <length-percentage> ): max(minimum, min(limit, max-content))
  where minimum represents an auto minimum (which is often, but not always, equal to a min-content minimum)
  limit is the track sizing function passed as an argument to fit-content()
  i.e. the smaller of minmax(auto, max-content) and minmax(auto, limit)

repeat(): simply repeats a track list, compact notation to create a pattern
can repeat automatically to fill a space
auto-fit = auto-fill, except that after grid item placement any empty repeated tracks are collapsed ?!
powerful because can combine auto-fill / auto-fit with flex factor as maximum
note: The repeat() notation can‚Äôt be nested.
note: Automatic repetitions (auto-fill or auto-fit) cannot be combined with intrinsic or flexible sizes, requires definite track sizes so that the number of repetitions can be calculated
beware: automatic repetition can only appear once in the track list, but the same track list can also contain <fixed-repeat>s.

----

track list for the grid‚Äôs columns / grid‚Äôs rows
 track list is space-separated
 track list consists of line names and track sizing functions ???

track sizes can be fixed, flexible, or content-based
Each grid track is assigned a sizing function, which controls how it may grow

### Explicit tracks

- always created
- as many as specified
- beware: final grid may end up larger due to implicit tracks, see Implicit tracks ‚ùóÔ∏è

#### `grid-template-columns`, `grid-template-rows`

- specify track size of explicit grid tracks
- not inherited
- applies only to grid containers
- values: `none`, `<track-list>`, `<auto-track-list>`, see Track Size
- initial value: `none`

???what happens if only specifies columns but no rows ?? makes implicit rows

#### `grid-template-areas`

<!-- todo: 7.3 -->

- specifies names for explicit grid tracks
- beware: if specifies names for more explicit tracks than sized by `grid-template-columns` / `grid-template-rows`, creates new explicit tracks that are sized by `grid-auto-columns`, `grid-auto-rows` ‚ùóÔ∏è
- beware: total number of explicit tracks is larger length of value list of `grid-template-columns`, `grid-template-rows` and `grid-template-areas` ‚ùóÔ∏è
- not inherited
- applies only to grid containers
- values: `none`, `<string>`+
- initial value: `none`

 #### Shorthand

- specify all explicit tracks properties
- `grid-template`
- first `grid-template-rows`, then `grid-template-columns` separated by a `/`
or alternative for grid-template-area ?!?!?!
- beware: resets omitted explicit tracks properties to their initial value ‚ùóÔ∏è

### Implicit tracks

- created if grid items are placed outside of explicit tracks, i.e. line index is out of range, or too many items in auto-placement algorithm
<!-- todo: improve above "i.e." -->
- as many as needed
- beware: can't guarantee size of final grid, depends on number of implicit tracks generated ‚ùóÔ∏è

#### `grid-auto-columns`, `grid-auto-rows`

- specify track size of implicit grid tracks
- beware: also sizes additional explicit grid tracks from `grid-template-areas` that aren't sized by `grid-template-columns` / `grid-template-rows` ‚ùóÔ∏è
- not inherited
- applies only to grid containers
- relative to logical inline / block directions instead of physical directions, see Writing Mode
- values: `<track-size>`+, see Track Size
- initial value: `auto`, i.e. ??? SAME SIZE ?? MIN-CONTENT ??

tracks repeat if not enough specified
beware: can't specify individual track size for every implicit track since can grow to be be arbitrarily many ‚ùóÔ∏è
If multiple track sizes are given, the pattern is repeated as necessary to find the size of the affected tracks.

The first track after the last explicitly-sized track receives the first specified size, and so on forwards;
???and the last implicit grid track before the explicit grid receives the last specified size, and so on backwards. ??? WHAT BEFORE EXPLICIT GRID ???

### Shorthand

<!-- todo: 7.8 -->
- specify all explicit and implicit tracks properties
- beware: also sets `grid-auto-flow` ‚ùóÔ∏è
- `grid`
???
- beware: resets omitted properties to their initial value ‚ùóÔ∏è



## Placement

??? can place only certain items and leave others in between for auto placement

beware: can place items outside of explicit grid if index too large, too many items to auto place, etc.

grid item is placed into a grid area

Numeric indexes in the grid-placement properties count from the edges of the explicit grid. Positive indexes count from the start side (starting from 1 for the start-most explicit line), while negative indexes count from the end side (starting from -1 for the end-most explicit line).
the explicit grid contains at least one grid line in each axis

grid line can be referred to by numerical index, or by an author-specified name
Grid area can be named explicitly or referenced implicitly by its bounding grid lines


by default automatically placed in order of source document ?!?!?! NO, BY ORDER PROPERTY, FALL BACK TO SOURCE
by default one cell per item !!!!!!
if item has size specified bigger than area can overflow

- beware: affects only visual rendering, keyboard navigation and screen reader still use document tree order ‚ùóÔ∏è

can position multiple grid items in grid area ?? STACKING ORDER ?? VISUAL ORDER ??
???COPYFROMFLEXBOX beware: doesn't affect stacking order since doesn't change order of boxes but only the directions, see Visual order ‚ùóÔ∏è

### in explicit grid

via forwards (positive) and backwards (negative) numerical grid coordinates, named grid lines, and named grid areas

### in implicit grid

automatic item placement into empty areas, including reordering with order

### Auto-placement algorithm

<!-- todo: 8.5 -->
Grid items that aren‚Äôt explicitly placed are automatically placed into an unoccupied space in the grid container by the auto-placement algorithm
grid-auto-flow controls how the auto-placement algorithm works, specifying exactly how auto-placed items get flowed into the grid

#### `grid-auto-flow`

controls auto-placement of grid items without an explicit position.
Once the explicit grid is filled (or if there is no explicit grid) auto-placement will also cause the generation of implicit grid tracks.

- direction in which items are placed
adds new rows / columns as necessary

beware: takes items in order of `order` property

- specify direction and spacing of auto-placement
- not inherited
- applies only to grid containers
- values: `[ row | column ] || dense`
- initial value: `row`

##### `dense`

- by default, packing is sparse, i.e. auto-placed items are in-order even if this leaves holes that could have been filled by later items
- if specified, is dense, i.e. auto-placed items may appear out-of-order if this would fill holes
<!-- todo: improve explanation -->


## Size

let's grid determine size from placement, different than Flow Layout where specifies size on item
beware: use auto sizing of items to adapt to track size, different to Flex Layout where size on item determined layout

containing block of grid item is grid area its placed in

- beware: minimum size `auto` value of grid item that is not a scroll container, spans at least one track in that axis whose min track sizing function is auto, and spans more than one track in that axis of which none are flexible, then it resolves to `min-content` (with some adjustments) instead of zero ‚ö†Ô∏è

### `auto` size

depends on self-alignment values




## Visual order

like in Flex Layout
affects auto-placement, see grid-auto-flow
affects painting order

beware: affects only visual rendering, keyboard navigation and screen reader still use document tree order ‚ùóÔ∏è



## Alignment

"justify" is inline direction
"align" for block direction
??? also in Flex Layout
beware: in Grid Layout are same for different direction, in Flex Layout has multiple items for justify but ony single item (in line) for align
*-items properties are shortcuts for *-self properties of all child elements

???!!!justify-content, align-content can add additional space between tracks, i.e. grid is not purely the sum of the track sizes

## Gutters

empty grid tracks between other grid tracks
spaces grid tracks from each other

by default grid tracks are packed tightly
can use gap properties to make appear as separate 

can only specify for all rows / columns, not for individual ones
need to use margins of grid item instead

???!!!row-gap, column-gap can add additional space between tracks, i.e. grid is not purely the sum of the track sizes


## Flexible Length

- `<flex>` < `<dimension>` < data type
- number with a unit of dimension "flexible length"
- beware: only used in Grid Layout ‚ùóÔ∏è
- `fr` unit: fraction of positive free space
- like flex factor for `flex-basis: 0` in Flex Layout
- beware: positive free space is only distributed after all non-flexible track sizing functions have reached their maximum
- beware: can't be used in `calc()` function ‚ùóÔ∏è
- if sum of flexible lengths is smaller than 1 uses only that fraction of positive free space instead of everything, i.e. positive free space is left over
- beware: use only flexible lengths >= 1 to always guarantee that 100% of free space is distributed ‚ö†Ô∏è



## Flex Layout comparison

two dimensional
alignment of content in both dimensions
explicitly position items in the grid, i.e. can create "holes"
allows explicit overlapping of items

Although many layouts can be expressed with either Grid or Flexbox, they each have their specialties. Grid enforces 2-dimensional alignment, uses a top-down approach to layout, allows explicit overlapping of items, and has more powerful spanning capabilities. Flexbox focuses on space distribution within an axis, uses a simpler bottom-up approach to layout, can use a content-size‚Äìbased line-wrapping system to control its secondary axis, and relies on the underlying markup hierarchy to build more complex layouts. It is expected that both will be valuable and complementary tools for CSS authors.

columns / rows can use flexible sizing

sizes grid tracks and lets item size automatically grow to fill, instead of specifying item size ??
specifies size and location in grid (parent), instead of on child itself, doesn't need to hope they line up, guaranteed

can't change direction of grid, uses writing mode, not needed since grid itself provides any directions
??? also when laying out automatically 

SAME:

order property
margins, auto margins

?!?!beware: grid layout overwrites flex layout

## TODO

example1, 2
go over all examples again
2. Overview -> for introduction, examples
6.2. Grid Item Sizing
6.6. Automatic Minimum Size of Grid Items

## Resources

- [W3C - CSS Grid Layout Module Level 1](https://www.w3.org/TR/css-grid-1/)